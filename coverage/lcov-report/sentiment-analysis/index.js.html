<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for sentiment-analysis\index.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../prettify.css">
    <link rel="stylesheet" href="../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header high">
    <h1>Code coverage report for <span class="entity">sentiment-analysis\index.js</span></h1>
    <h2>
        Statements: <span class="metric">97.87% <small>(46 / 47)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">68.18% <small>(15 / 22)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">100% <small>(7 / 7)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">97.87% <small>(46 / 47)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../index.html">All files</a> &#187; <a href="index.html">sentiment-analysis/</a> &#187; index.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83</td><td class="line-coverage"><span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">202</span>
<span class="cline-any cline-yes">68</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">134</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">84</span>
<span class="cline-any cline-yes">68</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">38</span>
<span class="cline-any cline-yes">38</span>
<span class="cline-any cline-yes">38</span>
<span class="cline-any cline-yes">38</span>
<span class="cline-any cline-yes">38</span>
<span class="cline-any cline-yes">38</span>
<span class="cline-any cline-yes">38</span>
<span class="cline-any cline-yes">214</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">38</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">40</span>
<span class="cline-any cline-yes">40</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">40</span>
<span class="cline-any cline-yes">40</span>
<span class="cline-any cline-yes">192</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">40</span>
<span class="cline-any cline-yes">40</span>
<span class="cline-any cline-yes">162</span>
<span class="cline-any cline-yes">162</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">40</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">22</span>
<span class="cline-any cline-yes">22</span>
<span class="cline-any cline-yes">22</span>
<span class="cline-any cline-yes">22</span>
<span class="cline-any cline-yes">122</span>
<span class="cline-any cline-yes">122</span>
<span class="cline-any cline-yes">34</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">22</span>
<span class="cline-any cline-yes">22</span>
<span class="cline-any cline-yes">22</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">(function() {
  var afinnWordList, analyseSentence, doesWordExist, getScoreOfWord, getWordsInSentence, removeDuplicates;
&nbsp;
  afinnWordList = require(__dirname + '/AFINN-111.json');
&nbsp;
  doesWordExist = function(word) {
    if (word in afinnWordList) {
      return true;
    } else {
      return false;
    }
  };
&nbsp;
  getScoreOfWord = function(word) {
    if (afinnWordList[word]) {
      return afinnWordList[word];
    } else {
      return 0;
    }
  };
&nbsp;
  getWordsInSentence = function(sentence) {
    sentence = sentence != null ? sentence : <span class="branch-1 cbranch-no" title="branch not covered" >'';</span>
    sentence = typeof sentence === 'string' ? sentence : <span class="branch-1 cbranch-no" title="branch not covered" >'';</span>
    sentence = sentence.toLowerCase();
    sentence = sentence.replace(/(?:https?|ftp):\/\/[\n\S]+/g, '');
    sentence = sentence.replace(/[^\w\s]/gi, '');
    sentence = sentence.split(' ');
    sentence = sentence.filter(function(n) {
      return n !== '';
    });
    return sentence = removeDuplicates(sentence);
  };
&nbsp;
  removeDuplicates = function(arr) {
    var i, key, ref, res, results, value;
    <span class="missing-if-branch" title="if path not taken" >I</span>if (arr.length === 0) {
<span class="cstat-no" title="statement not covered" >      return [];</span>
    }
    res = {};
    for (key = i = 0, ref = arr.length - 1; 0 &lt;= ref ? i &lt;= ref : <span class="branch-1 cbranch-no" title="branch not covered" >i &gt;= ref;</span> key = 0 &lt;= ref ? ++i : <span class="branch-1 cbranch-no" title="branch not covered" >--i)</span> {
      res[arr[key]] = arr[key];
    }
    results = [];
    for (key in res) {
      value = res[key];
      results.push(value);
    }
    return results;
  };
&nbsp;
  analyseSentence = function(sentence) {
    var i, len, score, word, wordsArr;
    score = 0;
    wordsArr = getWordsInSentence(sentence);
    for (i = 0, len = wordsArr.length; i &lt; len; i++) {
      word = wordsArr[i];
      if (doesWordExist(word)) {
        score += getScoreOfWord(word);
      }
    }
    score = score &gt; 10 ? 10 : score;
    score = score &lt; -10 ? <span class="branch-0 cbranch-no" title="branch not covered" >-10 </span>: score;
    return score;
  };
&nbsp;
  module.exports = analyseSentence;
&nbsp;
  <span class="missing-if-branch" title="else path not taken" >E</span>if (process.env.NODE_ENV === 'test') {
    module.exports = {
      main: analyseSentence,
      _private: {
        doesWordExist: doesWordExist,
        getScoreOfWord: getScoreOfWord,
        removeDuplicates: removeDuplicates,
        getWordsInSentence: getWordsInSentence
      }
    };
  }
&nbsp;
}).call(this);
/* (C) Alicia Sykes &lt;alicia@aliciasykes.com&gt; 2015           *\
\* MIT License. Read full license at: https://goo.gl/IL4lQJ */</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu Oct 01 2015 09:07:59 GMT+0100 (GMT Daylight Time)</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
